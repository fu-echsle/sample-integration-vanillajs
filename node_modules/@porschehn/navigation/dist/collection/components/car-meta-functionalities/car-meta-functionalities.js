import { Component, Prop, h } from '@stencil/core';
import { ConfigureClickEvent } from '../../services/datalayer/configure-click-event';
import { CompareClickEvent } from '../../services/datalayer/compare-click-event';
import { FindCarClickEvent } from '../../services/datalayer/find-car-click-event';
import { analyticsSetupStore } from '../../state/analytics-setup-store';
import { FEATURE_MODEL_META } from '../../utility/constants';
import { isFeatureEnabled } from '../../env-config';
import { ModelMetaClickEvent } from '../../services/datalayer/model-meta-click-event';
export class CarMetaFunctionalities {
    constructor() {
        this.items = [
            { PhraseId: '', Text: '', Link: '' },
            { PhraseId: '', Text: '', Link: '' },
            { PhraseId: '', Text: '', Link: '' }
        ];
        this.modelMetaItems = [
            { PhraseId: '', Icon: '', Text: '', Link: '' },
            { PhraseId: '', Icon: '', Text: '', Link: '' },
            { PhraseId: '', Icon: '', Text: '', Link: '' }
        ];
        this.sendModelMetaFunctionAnalyticsEvent = (modelMetaItem) => {
            const analyticsSetup = {
                applicationId: analyticsSetupStore.get('applicationId'),
                locale: analyticsSetupStore.get('locale'),
                window: analyticsSetupStore.get('window'),
                environment: analyticsSetupStore.get('environment')
            };
            const modelMetaClickEvent = new ModelMetaClickEvent(analyticsSetup, this.name, modelMetaItem);
            const pagData = (window['pagData'] = window['pagData'] || []);
            pagData.push(modelMetaClickEvent.event());
        };
        this.sendConfigureClickAnalyticsEvent = (contentItem) => {
            const analyticsSetup = {
                applicationId: analyticsSetupStore.get('applicationId'),
                locale: analyticsSetupStore.get('locale'),
                window: analyticsSetupStore.get('window'),
                environment: analyticsSetupStore.get('environment')
            };
            const configureClickEvent = new ConfigureClickEvent(analyticsSetup, this.name, contentItem);
            const pagData = (window['pagData'] = window['pagData'] || []);
            pagData.push(configureClickEvent.event());
        };
        this.sendCompareClickAnalyticsEvent = (contentItem) => {
            const analyticsSetup = {
                applicationId: analyticsSetupStore.get('applicationId'),
                locale: analyticsSetupStore.get('locale'),
                window: analyticsSetupStore.get('window'),
                environment: analyticsSetupStore.get('environment')
            };
            const compareClickEvent = new CompareClickEvent(analyticsSetup, this.name, contentItem);
            const pagData = (window['pagData'] = window['pagData'] || []);
            pagData.push(compareClickEvent.event());
        };
        this.sendFindCarClickAnalyticsEvent = (contentItem) => {
            const analyticsSetup = {
                applicationId: analyticsSetupStore.get('applicationId'),
                locale: analyticsSetupStore.get('locale'),
                window: analyticsSetupStore.get('window'),
                environment: analyticsSetupStore.get('environment')
            };
            const findCarClickEvent = new FindCarClickEvent(analyticsSetup, this.name, contentItem);
            const pagData = (window['pagData'] = window['pagData'] || []);
            pagData.push(findCarClickEvent.event());
        };
    }
    renderItem(source, contentItem, analyticsEvent) {
        return (h("phn-p-link-pure", { href: contentItem.Link, icon: source, size: "inherit", onClick: () => analyticsEvent(contentItem), class: "car-meta-functionalities-item" }, contentItem.Text));
    }
    render() {
        return isFeatureEnabled(FEATURE_MODEL_META) ? (h("div", { class: "car-meta-functionalities" },
            h("div", { class: "car-meta-functionalities-wrapper" }, this.modelMetaItems.map((item) => (h("phn-p-link-pure", { href: item.Link, icon: item.Icon, onClick: () => this.sendModelMetaFunctionAnalyticsEvent(item), size: "inherit", class: "car-meta-functionalities-item" }, item.Text)))))) : (h("div", { class: "car-meta-functionalities" },
            h("div", { class: "car-meta-functionalities-wrapper" },
                this.renderItem('configurate', this.items[0], this.sendConfigureClickAnalyticsEvent),
                this.renderItem('compare', this.items[1], this.sendCompareClickAnalyticsEvent),
                this.renderItem('search', this.items[2], this.sendFindCarClickAnalyticsEvent))));
    }
    static get is() { return "phn-car-meta-functionalities"; }
    static get encapsulation() { return "scoped"; }
    static get originalStyleUrls() { return {
        "$": ["car-meta-functionalities.scss"]
    }; }
    static get styleUrls() { return {
        "$": ["car-meta-functionalities.css"]
    }; }
    static get properties() { return {
        "name": {
            "type": "string",
            "mutable": false,
            "complexType": {
                "original": "string",
                "resolved": "string",
                "references": {}
            },
            "required": false,
            "optional": false,
            "docs": {
                "tags": [],
                "text": ""
            },
            "attribute": "name",
            "reflect": false
        },
        "items": {
            "type": "unknown",
            "mutable": false,
            "complexType": {
                "original": "ContentItem[]",
                "resolved": "ContentItem[]",
                "references": {
                    "ContentItem": {
                        "location": "import",
                        "path": "../../entities/item"
                    }
                }
            },
            "required": false,
            "optional": false,
            "docs": {
                "tags": [],
                "text": ""
            },
            "defaultValue": "[\n    { PhraseId: '', Text: '', Link: '' },\n    { PhraseId: '', Text: '', Link: '' },\n    { PhraseId: '', Text: '', Link: '' }\n  ]"
        },
        "modelMetaItems": {
            "type": "unknown",
            "mutable": false,
            "complexType": {
                "original": "ModelMetaContentItem[]",
                "resolved": "ModelMetaContentItem[]",
                "references": {
                    "ModelMetaContentItem": {
                        "location": "import",
                        "path": "../../entities/item"
                    }
                }
            },
            "required": false,
            "optional": false,
            "docs": {
                "tags": [],
                "text": ""
            },
            "defaultValue": "[\n    { PhraseId: '', Icon: '', Text: '', Link: '' },\n    { PhraseId: '', Icon: '', Text: '', Link: '' },\n    { PhraseId: '', Icon: '', Text: '', Link: '' }\n  ]"
        }
    }; }
}
