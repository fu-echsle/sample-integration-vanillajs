'use strict';

const initBlurOnFocus = () => {
    document.addEventListener('click', () => {
        const element = document.activeElement;
        const optOutElement = element.closest('.p-re-enable-focus-on-click');
        const isExcluded = ['SELECT', 'INPUT', 'TEXTAREA'].includes(element.tagName);
        if (optOutElement === null && !isExcluded) {
            document.activeElement.blur();
        }
    });
};

const injectGlobalStyle = () => {
    const link = document.createElement('link');
    link.href = 'https://cdn.ui.porsche.com/porsche-design-system/styles/v2/porsche-design-system.css';
    link.type = 'text/css';
    link.rel = 'stylesheet';
    document.getElementsByTagName('head')[0].appendChild(link);
};

const appGlobalScript = () => {
    injectGlobalStyle();
    initBlurOnFocus();
};

const globalScripts = appGlobalScript;

exports.globalScripts = globalScripts;
