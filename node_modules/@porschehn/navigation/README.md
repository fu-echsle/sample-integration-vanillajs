# Porsche Home & Navigation

As the top element of Porsche websites, the Header Component aims to create a visual and functional bracket in front of the user. It connects all websites and applications and supports users to get their journey started. In this way, we want to ensure that users never lose themselves in Porsche's digital ecosystem, always find their way back, have the opportunity to orient themselves and start a new journey.

## Installation

#### Via NPM

```sh
# .npmrc
 
registry=https://registry.npmjs.com/
@porschehn:registry=https://porscheui.jfrog.io/porscheui/api/npm/npm/
@porschehn:always-auth=true

# using yarn
yarn add @porschehn/navigation
 
# using npm
npm install @porschehn/navigation
```

#### Via CDN

CDN URL
- module: //nav.porsche.com/00BC524/porsche-navigation.esm.js
- nomodule: //nav.porsche.com/00BC524/porsche-navigation.js

#### Dependencies
- Porsche Design System: v1.3.0
- One GA Data Layer https://highway.porsche.com/confluence/display/DDMAP/02+Data+Layer

## Complete Documentation

Find the detailed [documentation](https://highway.porsche.com/confluence/display/HOMENAV/2.1.2+How-To+implement+me) in Highway Confluence. (Needs PPN Certificate). If you don't have Highway access, there is also a PDF documentation [here](header-v1.9.0-implementation-document.pdf)

## Usage

#### Props

| name        | description          | example  |
| ------------- |-------------| -----|
| locale      | Format: <br /><Language Code ISO 639-1>-<Country Codes ISO 3166-1><br /> Currently supports: <br /> de-CH, it-CH, fr-CH<br /><br /> MVP Fallback: <br /> (you'll get notified in the console): de-CH | `<phn-header locale="de-CH" />` |
| accessToken/access-token      | The access token will be used to display the logged in state.<br/><br />MVP Fallback: If the access-token is not passed as a prop/attribute, the navigation will be rendered in the user's 'logged-out' state. <br /><br/>For Porsche.com pages: Please omit the prop as the web component fetches the access-token for you (fallback due to technical limitations of the CMS).     | `<phn-header access-token="my-access-token" />` |
|env|Set this property / attribute to preview to replace the content with preview links. <br /> All functionalities, including logged in user, are using the preview environment and application. <br /><br /> Possible values: preview, production (default, also when omitted)|`<phn-header env="preview"/>`|

Examples:
```html
<!-- Example production -->
<phn-header locale="de-CH" access-token="my-access-token" />
```
```html
<!-- Example production porsche.com -->
<phn-header locale="de-CH" />
```
```html
<!-- Example preview -->
<phn-header locale="de-CH" access-token="my-access-token" env="preview" />
```
```html
<!-- Example preview porsche.com-->
<phn-header locale="de-CH" env="preview" />
```

#### Preventing content shifting before navigation fully loads

The component only becomes visible when the components have loaded. Teams implementing the navigation should apply a CSS file that we provide in order to prevent this issue. It is available in the dist folder, which you can import in your main CSS file.

```
@import "~@porschehn/navigation/dist/porsche-navigation/porsche-navigation.css";
```


## Changelog
For updates and versions see our [Changelog](CHANGELOG.md)

## Demo
https://vanillajs.preview-nav.porsche.com/

## Support 
[Bugs+Requests](https://github.com/porsche-home-nav/porsche-home-and-nav/issues)<br></br>
[Questions+Feedback](https://join.slack.com/share/IUNBM6L83/TbdTZI4rf6vkJLBvczsbZEnX/enQtOTc0Mzk1MjI0Mjc1LTQyNTlmMDIzYTlhMmUxNjI5MzIxMGM1NDE4NzI5YWM4M2RkYTMzMWU5N2YzYmExNTlhODYwOGNkNjFjNTA5NzE)

## Planning & Next steps
[Highway](https://highway.porsche.com/confluence/pages/viewpage.action?pageId=100209124)<br></br>
[PDF](https://github.com/porsche-home-nav/porsche-home-and-nav/blob/master/packages/navigation/2.2.0%20Planning%20%26%20Next%20Steps-v51-20200214_144659.pdf)

## Project Maintainer Setup

### Requirements

* Node.js
* Yarn

### Getting started

1. Clone repository 

```sh
git clone git@github.com:porscheui/porsche-home-and-nav.git
```

2. Switch to project directory

```sh
cd porsche-home-and-nav/packages/navigation
```

3. Set private registry address

```sh
npm login --registry=https://porscheui.jfrog.io/porscheui/api/npm/npm/
```

4. Install dependencies

```sh
yarn install
```

### Running Tests

#### Lint Project

```sh
yarn lint
```

#### Autofix Lint Errors

```sh
yarn lint.fix
```

#### Unit Tests

```sh
yarn test
```

#### End To End Tests
Until a yarn issue is resolved, we have to go with npm

```sh
npm run test.e2e
```

#### Watching Tests

```sh
yarn test.watch
```
#### Pre Commit Chain
Until a yarn issue is resolved, we have to go with npm

```sh
npm run precommit.routine
```

#### Getting Code Coverage

Attention: Will not take e2e tests into account

```sh
yarn coverage
```

#### Feature Toggles:
There are currently no feature toggles in the component but once present, it can be changed spontaneously as following:
http://my-website-url.porsche.com/path?`homenav_feature1=true`

Where the url is the base url followed by the path components that the website/test page use.
The feature toggle is part of the query parameter list.

Feature toggles have a default value that is set in the configuration inside the component and can be overriden using the above syntax.
This is only valid for test/preview/pre-production environment. On production, this overriding behavior is not allowed.

Happy Coding!!
