import { throttle } from 'throttle-debounce';
const listeners = new Map();
const handleResize = throttle(500, () => {
    listeners.forEach(callback => {
        callback();
    });
});
export const attachListenerIfNeeded = () => {
    if (listeners.size === 1) {
        window.addEventListener('resize', handleResize);
    }
};
export const removeListenerIfNotNeededAnymore = () => {
    if (listeners.size < 1) {
        window.removeEventListener('resize', handleResize);
    }
};
export const listenResize = (callback) => {
    const token = {};
    listeners.set(token, callback);
    attachListenerIfNeeded();
    return () => {
        listeners.delete(token);
        removeListenerIfNotNeededAnymore();
    };
};
