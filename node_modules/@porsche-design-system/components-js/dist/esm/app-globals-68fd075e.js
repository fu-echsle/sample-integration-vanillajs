import { t as trackLoader } from './index-e8247a5d.js';

const initBlurOnFocus = () => {
    if (typeof document === 'undefined') {
        return;
    }
    document.addEventListener('click', () => {
        const element = document.activeElement;
        /**
         * this additional condition is an ie11 workaround
         * when the active element get's removed before
         * the listener is called, the activeElement on ie11
         * will be null. (other browsers will always have an
         * active element, body as fallback)
         * you can test it with:
         * document.activeElement.removeNode();
         * console.log(document.activeElement);
         */
        if (element) {
            const optOutElement = element.closest('.p-re-enable-focus-on-click');
            const isExcluded = ['SELECT', 'INPUT', 'TEXTAREA'].includes(element.tagName);
            if (optOutElement === null && !isExcluded) {
                element.blur();
            }
        }
    });
};

const injectGlobalStyle = () => {
    if (typeof document === 'undefined') {
        return;
    }
    const link = document.createElement('link');
    link.href = 'https://cdn.ui.porsche.com/porsche-design-system/styles/v3/porsche-design-system.css';
    link.type = 'text/css';
    link.rel = 'stylesheet';
    document.getElementsByTagName('head')[0].appendChild(link);
};

const appGlobalScript = () => {
    trackLoader();
    injectGlobalStyle();
    initBlurOnFocus();
};

const globalScripts = appGlobalScript;

export { globalScripts as g };
