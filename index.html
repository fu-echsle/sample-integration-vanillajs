<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex, nofollow" />

    <title>Sample Integration VanillaJS</title>

    <style>
      .pageLayout {
        margin-left: 10%;
        margin-right: 10%;
        margin-bottom: 2rem;
      }

      .divider {
        margin-bottom: 2rem;
        margin-top: 2rem;
      }
    </style>

    <script
      type="module"
      src="node_modules/@porsche-design-system/components-js/dist/porsche-design-system/porsche-design-system.esm.js"
    ></script>
    <script
      nomodule
      src="node_modules/@porsche-design-system/components-js/dist/porsche-design-system/porsche-design-system.js"
    ></script>
    <script
      type="module"
      src="node_modules/@porschehn/navigation/dist/porsche-navigation/porsche-navigation.esm.js"
    ></script>
    <script type="module" src="node_modules/performancetest/dist/performancetest/performancetest.js"></script>
    <script nomodule src="node_modules/@porschehn/navigation/dist/porsche-navigation/porsche-navigation.js"></script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div class="pageLayout">
      <p-grid>
        <p-grid-item size="12">
          <p-headline variant="headline-2" align="center"
            >Example usage of the Porsche-Design-System VanillaJS</p-headline
          >
        </p-grid-item>
        <p-grid-item size="12">
          <p-divider class="divider"></p-divider>
        </p-grid-item>
        <p-grid-item size="12">
          <p-link-pure href="#home">
            Home
          </p-link-pure>
          <p-link-pure href="#performancePage">
            Performance
          </p-link-pure>
        </p-grid-item>
        <p-grid-item size="12">
          <p-divider class="divider"></p-divider>
        </p-grid-item>
      </p-grid>
      <div id="app"></div>
    </div>

    <script type="text/javascript">
      const updateRoute = async () => {
        if (['#', ''].includes(document.location.hash)) {
          return;
        }

        const app = document.getElementById('app');
        const page = document.location.hash.substr(1);
        const template = await (await fetch(`/pages/${page}.html`)).text();
        app.innerHTML = template;

        // execute scripts inserted via innerHTML
        const scripts = app.getElementsByTagName('script');
        for (let i = 0; i < scripts.length; i++) {
          eval(scripts[i].innerText);
        }
      };

      window.addEventListener('hashchange', updateRoute);
      updateRoute();
    </script>
  </body>
</html>
